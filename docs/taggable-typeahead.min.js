/*!
 * taggable-typeahead.js 0.1.1
 * https://github.com/nanlabs/taggable-typeahead
 * Date Compiled: 2013-07-01
 */

!function(a){var b={init:function(b){b=b||{},b.tags=b.tags||[],b.focusClass=b.focusClass||"tag-cloud-focus";var c=new RegExp(",","g"),d=a(this),e=d.parents(".twitter-typeahead").wrap('<div class="tag-cloud" />'),f=e.find(".tt-hint"),g=e.parents(".tag-cloud");g.click(function(){d.focus()}),d.focus(function(){g.addClass(b.focusClass)}),d.blur(function(){i(),g.removeClass(b.focusClass)});var h=function(b){if(b=b.replace(c,""),""!==b&&!j(b)){var d=a('<div class="tag"><span>'+b+"</span></div>"),f=a('<i class="icon-remove icon-white"></i>');f.click(function(){f.parent().remove()}),d.append(f),d.insertBefore(e)}i()},i=function(){this.value="",d.val(""),f.val("")},j=function(b){var c=!1;return a.each(g.find(".tag span"),function(d,e){return a(e).text()===b?(c=!0,void 0):void 0}),c};d.keyup(function(a){var b=a.keyCode,c=13===b,e=188===b,f=8===b;(c||e)&&h(this.value),f&&d.data("delete-prev")&&(d.data("delete-prev",!1),g.find(".tag").last().remove(),i()),d.data("delete-prev",f&&""===this.value)}),d.on("typeahead:selected",function(a,b){h(b.value),d.typeahead("setQuery","")}),a.each(b.tags,function(a,b){h(b)})},get:function(){return a(".tag span",this.parents(".tag-cloud")).map(function(){return a(this).text()})},clear:function(){a("div",this).remove()}};jQuery.fn.taggable=function(c){return b[c]?b[c].apply(this,[].slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on taggable plugin"),void 0):b.init.apply(this,arguments)}}(window.jQuery);